function News(){}News.prototype.initUEidtor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n=$("input[name='title']").val(),i=$("select[name='category']").val(),a=$("input[name='desc']").val(),o=$("input[name='thumbnail']").val(),l=window.ue.getContent(),s="";s=e?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:s,data:{title:n,category:i,desc:a,thumbnail:o,content:l,pk:e},success:function(t){200===t.code&&xfzalert.alertSuccess("恭喜！新闻发布成功！",function(){window.location.reload()})}})})},News.prototype.run=function(){var t=this;t.initUEidtor(),t.listenUploadFileEvent(),t.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRVRWlkdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ2YWwiLCJsaXN0ZW5TdWJtaXRFdmVudCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwidGhpcyIsImF0dHIiLCJ0aXRsZSIsImNhdGVnb3J5IiwiZGVzYyIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJnZXRDb250ZW50IiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biIsInNlbGYiXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLFFBSVRBLEtBQUtDLFVBQVVDLFlBQWMsV0FDekJDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBUyxDQUM5QkMsbUJBQXNCLElBQ3RCQyxVQUFhLHNCQUlyQlIsS0FBS0MsVUFBVVEsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxPQUFPLFdBQ2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHSSxNQUFNLEdBQzFCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTRSxPQUFPLE9BQVFKLEdBQ3hCSyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVFOLEVBQ1JPLGFBQWUsRUFDZkMsYUFBZSxFQUNmQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdkIsSUFBSUwsRUFBTUssRUFBYSxLQUFPLElBQ1RkLEVBQUUsbUJBQ1JlLElBQUlOLFVBT3ZDcEIsS0FBS0MsVUFBVTBCLGtCQUFvQixXQUNmaEIsRUFBRSxlQUNSaUIsTUFBTSxTQUFVQyxHQUV0QkEsRUFBTUMsaUJBRU4sSUFDSUMsRUFETXBCLEVBQUVxQixNQUNDQyxLQUFLLGdCQUVkQyxFQUFRdkIsRUFBRSx1QkFBdUJlLE1BQ2pDUyxFQUFXeEIsRUFBRSwyQkFBMkJlLE1BQ3hDVSxFQUFPekIsRUFBRSxzQkFBc0JlLE1BQy9CVyxFQUFZMUIsRUFBRSwyQkFBMkJlLE1BQ3pDWSxFQUFVbkMsT0FBT0MsR0FBR21DLGFBRXBCbkIsRUFBTSxHQUVOQSxFQURBVyxFQUNNLGtCQUVBLG1CQUdWYixRQUFRQyxLQUFLLENBQ1RDLElBQU9BLEVBQ1BDLEtBQVEsQ0FDTmEsTUFBU0EsRUFDVEMsU0FBWUEsRUFDWkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsRUFDWFAsR0FBTUEsR0FFUlAsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE1BQ2JlLFNBQVNDLGFBQWEsYUFBYSxXQUMvQnRDLE9BQU91QyxTQUFTQyxpQkFVeEMzQyxLQUFLQyxVQUFVMkMsSUFBTSxXQUNqQixJQUFJQyxFQUFPYixLQUNYYSxFQUFLM0MsY0FDTDJDLEVBQUtwQyx3QkFDTG9DLEVBQUtsQixxQkFHVGhCLEVBQUUsWUFDWSxJQUFJWCxNQUNWNEMiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmZ1bmN0aW9uIE5ld3MoKSB7XG5cbn1cblxuTmV3cy5wcm90b3R5cGUuaW5pdFVFaWR0b3IgPSBmdW5jdGlvbigpe1xuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA0MDAsXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcbiAgICB9KTtcbn07XG5cbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7IC8vIOi/memHjOmdouWPq2ZpbGXmmK/kuLrkuoblkox2aWV36YeM6Z2i55qEZ2V055qE5YC85a+55bqUXG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbk5ld3MucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc3VibWl0QnRuID0gJCgnI3N1Ym1pdC1idG4nKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8v5LiN5Yqg6L+Z5Y+l6K+d55qE6K+d77yM5Y+R6YCB55qE5Y+q5piv5LiA5Liq5Lyg57uf55qE6KGo5Y2V5piv5peg5rOV5Y+R6YCB57uZ5pyN5Yqh5Zmo5o6l5pS255qEXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XG4gICAgICAgIHZhciBwayA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcblxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIikudmFsKCk7XG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcblxuICAgICAgICB2YXIgdXJsID0gJyc7XG4gICAgICAgIGlmIChwayl7XG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgdXJsID0gJy9jbXMvd3JpdGVfbmV3cy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXG4gICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICAnZGVzYyc6IGRlc2MsXG4gICAgICAgICAgICAgICd0aHVtYm5haWwnOiB0aHVtYm5haWwsXG4gICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcbiAgICAgICAgICAgICAgJ3BrJzogcGtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2Vzcygn5oGt5Zac77yB5paw6Ze75Y+R5biD5oiQ5Yqf77yBJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcbn07XG5cblxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmluaXRVRWlkdG9yKCk7XG4gICAgc2VsZi5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcbiAgIG5ld3MucnVuKCk7XG59KTsiXX0=
