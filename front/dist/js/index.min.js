function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<this.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFNBQ0xDLEtBQUtDLFlBQWMsSUFDbkJELEtBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxLQUFLSSxNQUFRLEVBQ2JKLEtBQUtLLFVBQVlGLEVBQUUsZUFDbkJILEtBQUtNLFdBQWFILEVBQUUsZ0JBQ3BCSCxL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S0FDdEJFLEVBQU1DLFNBQVMsWUFBWSxDQUFDRixPQUFTQSxJQUdyQ00sRUFBZ0IvRCxFQUFFLHFCQUN0QitELEVBQWNDLFFBQ2RELEVBQWMxQyxPQUFPcUMsR0FDckIvQyxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWNBLEVBRW5CZ0QsRUFBR2hDLFNBQVMsVUFBVU0sV0FBV0MsWUFBWSxVQUM3Q3pCLEVBQUtHLFFBQVFpQixjQVNqQ3JCLE1BQU1LLFVBQVVpQyxJQUFNLFdBQ1BuRCxLQUNOb0Qsc0JBRE1wRCxLQUVOK0QsNkJBSVQ1RCxFQUFFLFlBQ2UsSUFBSUosUUFDVm9ELE9BRUssSUFBSXRDLE9BQ1ZzQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJChcIiNiYW5uZXItZ3JvdXBcIik7XG4gICAgdGhpcy5pbmRleCA9IDE7XG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodC1hcnJvd1wiKTtcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XG5cbn07XG5cbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xuXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50IC0gMSkuY2xvbmUoKTtcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJXaWR0aCooc2VsZi5iYW5uZXJDb3VudCArIDIpLFwibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XG5cbn07XG5cbkJhbm5lci5wcm90b3R5cGUuaW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIHZhciBwYWdlQ29udHJvbiA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xuICAgIGZvciAodmFyIGk9MDtpPHRoaXMuYmFubmVyQ291bnQ7aSsrKSB7XG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xuICAgICAgICBzZWxmLnBhZ2VDb250cm9sLmFwcGVuZChjaXJjbGUpO1xuICAgICAgICBpZiAoaSA9PT0gMCl7XG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjpzZWxmLmJhbm5lckNvdW50KjEyKzgqMisoc2VsZi5iYW5uZXJDb3VudC0xKSoxNn0pXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKHNob3cpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKHNob3cpe1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XG4gICAgfWVsc2Uge1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKCk7XG4gICAgfVxufTtcblxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmJhbm5lclVsLnN0b3AoKS5hbmltYXRlKHtcImxlZnRcIjotNzk4KnNlbGYuaW5kZXh9LDUwMCk7XG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcbiAgICBpZiAoaW5kZXggPT09MCl7XG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XG4gICAgfWVsc2UgaWYgKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSl7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XG4gICAgfVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPj0gc2VsZi5iYW5uZXJDb3VudCsxKXtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0sMjAwMCk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gMCl7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyQ291bnQqc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IHNlbGYuYmFubmVyQ291bnQgLSAxO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSk7XG5cbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgLy/nrKzkuIDkuKrlh73mlbDvvIzmiorpvKDmoIfnp7vliLBiYW5uZXLph4znmoTml7blgJnop6blj5FcbiAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xuICAgIHNlbGYudG9nZ2xlQXJyb3codHJ1ZSk7XG4gICAgfSxmdW5jdGlvbiAoKSB7XG4gICAgLy/nrKzkuozkuKrlh73mlbDvvIzpvKDmoIfnprvlvIBiYW5uZXLnmoTml7blgJnop6blj5FcbiAgICBzZWxmLmxvb3AoKTtcbiAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsb2JqKSB7XG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XG5cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcbiAgICB0aGlzLmluaXRQYWdlQ29udHJvbCgpO1xuICAgIHRoaXMubG9vcCgpO1xuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcbiAgICB0aGlzLmxpc3RlbkFycm93Q2xpY2soKTtcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XG59O1xuXG5mdW5jdGlvbiBJbmRleCgpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2UgPSAyO1xuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xuICAgIHNlbGYubG9hZEJ0biA9ICQoJyNsb2FkLW1vcmUtYnRuJyk7IC8v55u05o6l5a6a5LmJ5oiQ5bGe5oCnXG5cblxufVxuXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBsb2FkQnRuID0gJCgnI2xvYWQtbW9yZS1idG4nKTtcbiAgICBsb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL2xpc3QvJyxcbiAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogc2VsZi5jYXRlZ29yeV9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ25ld3MtaXRlbScseyduZXdzZXMnOm5ld3Nlc30pOyAvL+i/memHjOWwseaYr+WKoOi9veabtOWkmuaMieS4i+WQjuWHuueOsOeahOaWsOWinueahOWGheWuue+8jOS5n+WwseaYr2xp6YeM6Z2i55qE5YaF5a65XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59O1xuXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0YWJHcm91cCA9ICQoJy5saXN0LXRhYicpO1xuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpOyAvL+i/meagt+WGmeWcqOeCueWHu+eahOaXtuWAmeS8muehruWumuaYr+WTquS4qmxpXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoJ2RhdGEtY2F0ZWdvcnknKTtcbiAgICAgICAgdmFyIHBhZ2UgPSAxO1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOmNhdGVnb3J5X2lkLFxuICAgICAgICAgICAgICAgICdwJzpwYWdlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnbmV3cy1pdGVtJyx7J25ld3Nlcyc6bmV3c2VzfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy/lhYjmuIXnqbp1bOWGheeahOS4nOilv1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoJy5saXN0LWlubmVyLWdyb3VwJyk7XG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkQnRuLnNob3coKTtcblxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcbn07XG5cbi8v5rWP6KeI5Zmo6L+Q6KGM5pe26Ieq5Yqo5Yqg6L29XG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuICAgIGJhbm5lci5ydW4oKTtcblxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xuICAgIGluZGV4LnJ1bigpO1xufSk7XG5cblxuXG4iXX0=
