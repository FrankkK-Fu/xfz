function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.handleNavStatus()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".author-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.handleNavStatus=function(){var t=window.location.href,n=window.location.protocol+"//"+window.location.host,i=t.replace(n,"");$(".nav li").each(function(t,n){var e=$(n);if(e.children("a").attr("href")===i)return e.addClass("active"),!1})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSignupEvent()},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha?random="+Math.random())})},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),i=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),i.click(function(){t.hideEvent()})},Auth.prototype.listenSigninEvent=function(){var i=this,t=$(".signin-group"),o=t.find("input[name='telephone']"),a=t.find("input[name='password']"),r=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=o.val(),n=a.val(),e=r.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){i.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var l=$(".signup-group");l.find(".submit-btn").click(function(t){t.preventDefault();var n=l.find("input[name='telephone']"),e=l.find("input[name='username']"),i=l.find("input[name='img_captcha']"),o=l.find("input[name='password1']"),a=l.find("input[name='password2']"),r=n.val(),s=e.val(),c=i.val(),p=o.val(),u=a.val();xfzajax.post({url:"/account/register/",data:{telephone:r,username:s,password1:p,password2:u,img_captcha:c},success:function(t){window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),i=((new Date).getTime()-e)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiaGFuZGxlTmF2U3RhdHVzIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImRvbWFpbiIsInByb3RvY29sIiwiaG9zdCIsInBhdGgiLCJyZXBsYWNlIiwiZWFjaCIsImluZGV4IiwiZWxlbWVudCIsImxpIiwiY2hpbGRyZW4iLCJhdHRyIiwiYWRkQ2xhc3MiLCJzZWxmIiwibGlzdGVuU2hvd0hpZGVFdmVudCIsImxpc3RlblN3aXRjaEV2ZW50IiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5JbWdDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TaWdudXBFdmVudCIsImNsaWNrIiwiY3VycmVudExlZnQiLCJjc3MiLCJwYXJzZUludCIsImFuaW1hdGUiLCJsZWZ0IiwiaW1nQ2FwdGNoYSIsIk1hdGgiLCJyYW5kb20iLCJzaG93RXZlbnQiLCJoaWRlRXZlbnQiLCJzaWduaW5CdG4iLCJzaWdudXBCdG4iLCJjbG9zZUJ0biIsInNpZ25pbkdyb3VwIiwidGVsZXBob25lSW5wdXQiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsInhmemFqYXgiLCJwb3N0IiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJyZWxvYWQiLCJzaWdudXBHcm91cCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZUlucHV0IiwiaW1nQ2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInVzZXJuYW1lIiwiaW1nX2NhcHRjaGEiLCJwYXNzd29yZDEiLCJwYXNzd29yZDIiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGVWYWx1ZSIsImRhdGUiLCJEYXRlIiwiZGF0ZXRzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsIm1pbnV0ZXMiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxhQXlDVCxTQUFTQyxPQUNNQyxLQUNOQyxZQUFjQyxFQUFFLGlCQURWRixLQUVORyxjQUFnQkQsRUFBRSxtQkF4QzNCSixVQUFVTSxVQUFVQyxJQUFNLFdBQ2JMLEtBQ05NLHFCQURNTixLQUVOTyxtQkFHUFQsVUFBVU0sVUFBVUUsbUJBQXFCLFdBQ3JDLElBQUlFLEVBQVVOLEVBQUUsZUFDWk8sRUFBY1AsRUFBRSxrQkFDcEJNLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDZCxXQUNFRixFQUFZRyxVQUtwQmQsVUFBVU0sVUFBVUcsZ0JBQWtCLFdBQ2xDLElBQUlNLEVBQU1DLE9BQU9DLFNBQVNDLEtBR3RCQyxFQUZXSCxPQUFPQyxTQUFTRyxTQUVULEtBRFhKLE9BQU9DLFNBQVNJLEtBRXZCQyxFQUFPUCxFQUFJUSxRQUFRSixFQUFPLElBRWpCZixFQUFFLFdBQ1JvQixLQUFLLFNBQVVDLEVBQU1DLEdBQ3hCLElBQUlDLEVBQUt2QixFQUFFc0IsR0FHWCxHQUZXQyxFQUFHQyxTQUFTLEtBQ1BDLEtBQUssVUFDUlAsRUFFVCxPQURBSyxFQUFHRyxTQUFTLFdBQ0wsS0FXbkI3QixLQUFLSyxVQUFVQyxJQUFNLFdBQ2pCLElBQUl3QixFQUFPN0IsS0FDWDZCLEVBQUtDLHNCQUNMRCxFQUFLRSxvQkFDTEYsRUFBS0csb0JBQ0xILEVBQUtJLHdCQUNMSixFQUFLSyxxQkFHVG5DLEtBQUtLLFVBQVUyQixrQkFBb0IsV0FDakMsSUFBSUYsRUFBTzdCLEtBQ0lFLEVBQUUsV0FDUmlD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UytDLEVBQVUsR0FBRyxJQUN2QkUsTUFBTSxPQUdDLE9BQWJGLEdBQXlCQSxFQUFZLFFBQ3RDRyxLQUFPbEQsU0FBUytDLEVBQVUsR0FBRyxHQUFHLElBQ3pCRyxLQUFLLE1BSURQLEVBQUtRLGNBTUosSUFMQVIsRUFBS1MsV0FLSyxJQUpaVCxFQUFLVSxTQUllLElBSG5CVixFQUFLVyxXQUd1QixJQUYxQlgsRUFBS1kiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+eUqOadpeWkhOeQhuWvvOiIquadoVxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xuICAgIFxufVxuXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcbiAgc2VsZi5oYW5kbGVOYXZTdGF0dXMoKTtcbn07XG5cbkZyb250QmFzZS5wcm90b3R5cGUubGlzdGVuQXV0aEJveEhvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdXRoQm94ID0gJCgnLmF1dGhvci1ib3gnKTtcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKCcudXNlci1tb3JlLWJveCcpO1xuICAgIGF1dGhCb3guaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XG4gICAgfSxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKTtcbiAgICB9KTtcbn07XG5cbi8v6L+Z6YOo5YiG5LiN5piv5b6I5oeCXG5Gcm9udEJhc2UucHJvdG90eXBlLmhhbmRsZU5hdlN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sO1xuICAgIHZhciBob3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgdmFyIGRvbWFpbiA9IHByb3RvY29sKycvLycraG9zdDtcbiAgICB2YXIgcGF0aCA9IHVybC5yZXBsYWNlKGRvbWFpbiwnJyk7XG5cbiAgICB2YXIgbmF2TGlzID0gJCgnLm5hdiBsaScpO1xuICAgIG5hdkxpcy5lYWNoKGZ1bmN0aW9uIChpbmRleCxlbGVtZW50KSB7XG4gICAgICAgIHZhciBsaSA9ICQoZWxlbWVudCk7XG4gICAgICAgIHZhciBhVGFnID0gbGkuY2hpbGRyZW4oJ2EnKTtcbiAgICAgICAgdmFyIGhyZWYgPSBhVGFnLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgaWYgKGhyZWYgPT09IHBhdGgpe1xuICAgICAgICAgICAgbGkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7Ly8g57uT5p2f5b6q546vXG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8v55So5p2l5aSE55CG55m75b2V5ZKM5rOo5YaMXG5mdW5jdGlvbiBBdXRoKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLm1hc2tXcmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xuICAgIHNlbGYuc2Nyb2xsV3JhcHBlciA9ICQoJy5zY3JvbGwtd3JhcHBlcicpO1xufVxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xuICAgIHNlbGYubGlzdGVuSW1nQ2FwdGNoYUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TaWdudXBFdmVudCgpO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBzd2l0Y2hlciA9ICQoXCIuc3dpdGNoXCIpO1xuICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KTtcbiAgICAgICAgaWYgKGN1cnJlbnRMZWZ0IDwgMCl7XG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6JzAnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6XCItNDAwcHhcIn0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKCcuaW1nLWNhcHRjaGEnKTtcbiAgICBpbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsXCIvYWNjb3VudC9pbWdfY2FwdGNoYVwiK1wiP3JhbmRvbT1cIitNYXRoLnJhbmRvbSgpKVxuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUuc2hvd0V2ZW50ID0gZnVuY3Rpb24gKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xufTtcblxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIuaGlkZSgpO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzaWduaW5CdG4gPSAkKCcuc2lnbmluLWJ0bicpO1xuICAgIHZhciBzaWdudXBCdG4gPSAkKCcuc2lnbnVwLWJ0bicpO1xuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcblxuICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOjB9KTtcbiAgICB9KTtcblxuICAgIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgc2VsZi5zaG93RXZlbnQoKTtcbiAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjotNDAwfSk7XG4gICAgfSk7XG5cbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgfSk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xuXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvbG9naW4vJyxcbiAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6cmVtZW1iZXI/MTowXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ251cEV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ251cEdyb3VwLmZpbmQoJy5zdWJtaXQtYnRuJyk7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XG4gICAgICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xuICAgICAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XG4gICAgICAgIC8vIHZhciBzbXNDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc21zX2NhcHRjaGEnXVwiKTtcblxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQyID0gcGFzc3dvcmQySW5wdXQudmFsKCk7XG4gICAgICAgIC8vIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKTtcblxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9yZWdpc3Rlci8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzogcGFzc3dvcmQxLFxuICAgICAgICAgICAgICAgICdwYXNzd29yZDInOiBwYXNzd29yZDIsXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nX2NhcHRjaGEsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xuICAgIGF1dGgucnVuKCk7XG59KTtcblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpO1xuICAgIGZyb250QmFzZS5ydW4oKTtcbn0pO1xuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgaWYod2luZG93LnRlbXBsYXRlKXtcbiAgICAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xuICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7Ly/lvpfliLDnmoTmmK/mr6vnp5LnmoRcbiAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGV0cykvMTAwMDtcblxuICAgICAgICBpZiAodGltZXN0YW1wIDwgNjApe1xuICAgICAgICAgICAgcmV0dXJuICfliJrliJonXG4gICAgICAgIH1cbiAgICBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAqNjApe1xuICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MCk7XG4gICAgICAgICAgICByZXR1cm4gbWludXRlcysn5YiG6ZKf5YmNJztcbiAgICAgICAgfVxuXG4gICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KXtcbiAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwLzYwKTtcbiAgICAgICAgICAgIHJldHVybiBob3Vycysn5bCP5pe25YmNJztcbiAgICAgICAgfVxuXG4gICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKXtcbiAgICAgICAgICAgIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAvNjAvNjAvMjQpO1xuICAgICAgICAgICAgcmV0dXJuIGRheXMrJ+WkqeWJjSc7XG4gICAgICAgIH1cblxuICAgIGVsc2V7XG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB5ZWFyKycvJyttb250aCsnLycrZGF5KycgJytob3VyKyc6JyttaW51dGU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgfVxufSk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iXX0=
