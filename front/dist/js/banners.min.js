function Banners(){}Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能6张轮播图"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗?",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除才成功！"))}})}}):e.remove()})},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find('span[class="priority"]'),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成！")),s.text("优先级："+e))}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImNyZWF0ZUJhbm5lckl0ZW0iLCJiYW5uZXIiLCJzZWxmIiwidGhpcyIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwiJCIsImJhbm5lckl0ZW0iLCJhcHBlbmQiLCJmaW5kIiwicHJlcGVuZCIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJhZGRSZW1vdmVCYW5uZXJFdmVudCIsImFkZFNhdmVCYW5uZXJFdmVudCIsImxpc3RlbkFkZEJhbm5lckV2ZW50IiwiY2xpY2siLCJjaGlsZHJlbiIsImxlbmd0aCIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93SW5mbyIsImltYWdlIiwiaW1hZ2VJbnB1dCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsImF0dHIiLCJiYW5uZXJJZCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImJhbm5lcl9pZCIsInJlbW92ZSIsInNob3dTdWNjZXNzIiwibG9hZERhdGEiLCJnZXQiLCJiYW5uZXJzIiwiaSIsInNhdmVCdG4iLCJpbWFnZVRhZyIsInByaW9yaXR5VGFnIiwibGlua3RvVGFnIiwicHJpb3JpdHlTcGFuIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJ2YWwiLCJsaW5rX3RvIiwicGsiLCJydW4iXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLFdBSVRBLFFBQVFDLFVBQVVDLGlCQUFtQixTQUFTQyxHQUMxQyxJQUFJQyxFQUFPQyxLQUNQQyxFQUFNQyxTQUFTLGNBQWUsQ0FBQ0osT0FBVUEsSUFDekNLLEVBQWtCQyxFQUFFLHNCQUNwQkMsRUFBYSxLQUliQSxFQUZBUCxHQUNBSyxFQUFnQkcsT0FBT0ws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SVQsU0FDVjhEIiwiZmlsZSI6ImJhbm5lcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5mdW5jdGlvbiBCYW5uZXJzKCkge1xuXG59XG5cbkJhbm5lcnMucHJvdG90eXBlLmNyZWF0ZUJhbm5lckl0ZW0gPSBmdW5jdGlvbihiYW5uZXIpe1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIsIHtcImJhbm5lclwiOiBiYW5uZXJ9KTtcbiAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJCgnLmJhbm5lci1saXN0LWdyb3VwJyk7XG4gICAgdmFyIGJhbm5lckl0ZW0gPSBudWxsXG5cbiAgICBpZiAoYmFubmVyKXtcbiAgICAgICAgYmFubmVyTGlzdEdyb3VwLmFwcGVuZCh0cGwpOy8v6L+Z5qC35piv5Li65LqG5a6a5L2N5Yiw6ZyA6KaB5L+u5pS55ZKM5L+d5a2Y55qE6YKj5LiqYmFubmVyaXRlbVxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoJy5iYW5uZXItaXRlbTpsYXN0Jyk7XG4gICAgfWVsc2Uge1xuICAgICAgICBiYW5uZXJMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoJy5iYW5uZXItaXRlbTpmaXJzdCcpO1xuICAgIH1cblxuICAgIC8v6L+Z6YeM6ZyA6KaB5YWI5Yqg6L+b5Y67YmFubmVyTGlzdEdyb3Vw5omN6IO957un57ut57uR5a6a5LqL5Lu2XG4gICAgc2VsZi5hZGRJbWFnZVNlbGVjdEV2ZW50KGJhbm5lckl0ZW0pO1xuICAgIHNlbGYuYWRkUmVtb3ZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XG4gICAgc2VsZi5hZGRTYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5BZGRCYW5uZXJFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPXRoaXM7XG4gICAgdmFyIGFkZEJ0biA9ICQoJyNhZGQtYmFubmVyLWJ0bicpO1xuXG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xuICAgICAgICB2YXIgbGVuZ3RoID0gYmFubmVyTGlzdEdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoID49IDYpIHtcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKCfmnIDlpJrlj6rog7025byg6L2u5pKt5Zu+Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5jcmVhdGVCYW5uZXJJdGVtKCk7XG5cbiAgICB9KTtcbn07XG5cbkJhbm5lcnMucHJvdG90eXBlLmFkZEltYWdlU2VsZWN0RXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcbiAgICB2YXIgaW1hZ2VJbnB1dCA9IGJhbm5lckl0ZW0uZmluZCgnLmltYWdlLWlucHV0Jyk7XG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7Ly/lsIbngrnlh7vlm77niYflkozngrnlh7tpbnB1dOe7keWumlxuICAgIH0pO1xuXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07IC8v56ys5LiA5Liq5paH5Lu2XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsZmlsZSk7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLHVybCk7IC8v6L+Z6YeM5pS55Y+Y5LqG5Zu+54mH55qEVVJM5Lmf5bCx5piv5pS55Y+Y5LqG5Zu+54mHXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0pO1xufTtcblxuQmFubmVycy5wcm90b3R5cGUuYWRkUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcbiAgICB2YXIgY2xvc2VCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5jbG9zZS1idG4nKTtcblxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XG4gICAgICAgIGlmIChiYW5uZXJJZCkge1xuICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcbiAgICAgICAgICAgICAgICAndGV4dCc6ICfmgqjnoa7lrpropoHliKDpmaTov5nkuKrova7mkq3lm77lkJc/JyxcbiAgICAgICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvY21zL2RlbGV0ZV9iYW5uZXIvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuWIoOmZpOaJjeaIkOWKn++8gScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5sb2FkRGF0YSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgJ3VybCc6ICcvY21zL2Jhbm5lcl9saXN0LycsXG4gICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gcmVzdWx0WydkYXRhJ107IC8v6L+Z6YeM6KGo56S65p+l55yL5pWw5o2u5bqT5Lit5pyJ5aSa5bCR5LiqYmFubmVy77yM54S25ZCO5o+S5YWlXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGJhbm5lcnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmFubmVyID0gYmFubmVyc1tpXTsgLy/nrKxp5LiqYmFubmVyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbShiYW5uZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuQmFubmVycy5wcm90b3R5cGUuYWRkU2F2ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24oYmFubmVySXRlbSl7XG4gICAgdmFyIHNhdmVCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5zYXZlLWJ0bicpO1xuICAgIHZhciBpbWFnZVRhZyA9IGJhbm5lckl0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcbiAgICB2YXIgbGlua3RvVGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0nbGlua190byddXCIpO1xuICAgIHZhciBwcmlvcml0eVNwYW4gPSBiYW5uZXJJdGVtLmZpbmQoJ3NwYW5bY2xhc3M9XCJwcmlvcml0eVwiXScpO1xuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cihcImRhdGEtYmFubmVyLWlkXCIpO1xuICAgIHZhciB1cmwgPSAnJztcbiAgICBpZiAoYmFubmVySWQpe1xuICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X2Jhbm5lci8nO1xuICAgIH1lbHNlIHtcbiAgICAgICAgdXJsID0gJy9jbXMvYWRkX2Jhbm5lci8nO1xuICAgIH1cblxuICAgIHNhdmVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW1hZ2VfdXJsID0gaW1hZ2VUYWcuYXR0cignc3JjJyk7XG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5VGFnLnZhbCgpO1xuICAgICAgICB2YXIgbGlua190byA9IGxpbmt0b1RhZy52YWwoKTtcblxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6IHVybCxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICdpbWFnZV91cmwnOiBpbWFnZV91cmwsXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5JzogcHJpb3JpdHksXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxuICAgICAgICAgICAgICAgICdwayc6IGJhbm5lcklkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmFubmVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfova7mkq3lm77kv67mlLnmiJDlip8nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySWQgPSByZXN1bHRbJ2RhdGEnXVsnYmFubmVyX2lkJ107Ly/ov5nph4zpnIDopoHojrflvpdQS+eahOWAvFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsYmFubmVySWQpOy8v5o+S5YWlUEvlgLxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfova7mkq3lm77mt7vliqDlrozmiJDvvIEnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eVNwYW4udGV4dChcIuS8mOWFiOe6p++8mlwiK3ByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuQmFubmVycy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubGlzdGVuQWRkQmFubmVyRXZlbnQoKTtcbiAgICB0aGlzLmxvYWREYXRhKCk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgIHZhciBiYW5uZXJzID0gbmV3IEJhbm5lcnMoKTtcbiAgIGJhbm5lcnMucnVuKCk7XG59KTsiXX0=
